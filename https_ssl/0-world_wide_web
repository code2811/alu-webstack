#!/usr/bin/env bash
# Bash script to display information about domain and subdomains

# Function to audit a subdomain
audit_subdomain() {
    domain=$1
    subdomain=$2
    
    # Use dig to query DNS and awk to format the output
    record_info=$(dig "$subdomain.$domain" | grep -A1 'ANSWER SECTION:' | tail -1)
    record_type=$(echo "$record_info" | awk '{print $4}')
    destination=$(echo "$record_info" | awk '{print $5}')
    
    echo "The subdomain $subdomain is a $record_type record and points to $destination"
}

# Main script
domain=$1
subdomain=$2

if [ -z "$subdomain" ]; then
    # If no subdomain is specified, check for default subdomains in specific order
    audit_subdomain "$domain" "www"
    audit_subdomain "$domain" "lb-01"
    audit_subdomain "$domain" "web-01"
    audit_subdomain "$domain" "web-02"
else
    # If a specific subdomain is specified, only check that one
    audit_subdomain "$domain" "$subdomain"
fi
